{% extends 'index.html' %}
{% load static %}

{% block content %}
<section class="hero">
    <h1>–û—Ç–∫—Ä–æ–π –º–∏—Ä –º—É–∑—ã–∫–∏</h1>
    <p>–ú–∏–ª–ª–∏–æ–Ω—ã —Ç—Ä–µ–∫–æ–≤, —Ç—ã—Å—è—á–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏ –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</p>
    <button class="cta-button" onclick="location.href='{% url 'library' %}'">
        –ú–æ—è –º–µ–¥–∏–∞—Ç–µ–∫–∞
    </button>
</section>

<section class="section">
    <div class="section-header">
        <h2 class="section-title"> –•–∏—Ç—ã</h2>
        <div class="filters-container">
            <div class="sort-buttons">
                <a href="?sort=desc" 
                   class="sort-btn {% if current_sort == 'desc' %}active{% endif %}"
                   title="–°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ">
                    ‚Üì –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ
                </a>
                <a href="?sort=asc" 
                   class="sort-btn {% if current_sort == 'asc' %}active{% endif %}"
                   title="–°–Ω–∞—á–∞–ª–∞ –Ω–µ–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ">
                    ‚Üë –ù–µ–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ
                </a>
            </div>
            <a href="{% url 'library' %}" class="view-all">–í—Å–µ —Ç—Ä–µ–∫–∏</a>
        </div>
    </div>
    
    <div class="track-list">
        {% for track in popular_tracks %}
        <div class="track-item">
            <div class="track-number">{{ forloop.counter }}</div>
            <div class="track-info">
                <div class="track-title">{{ track.title }}</div>
                <div class="track-meta">
                    <a href="{% url 'artist_detail' track.main_artist.name %}" class="artist-link">
                        {{ track.main_artist.name }}
                    </a>
                    <span class="listens-count-compact">‚Ä¢ {{ track.listens_count }} –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π</span>
                </div>
            </div>
            <div class="track-duration">{{ track.duration }}</div>
            <button class="play-button">‚ñ∂</button>
        </div>
        {% empty %}
        <div class="track-item">
            <div class="track-info">
                <div class="track-title">–¢—Ä–µ–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
                <div class="track-artist">–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–∫–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É</div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<section class="section">
    <div class="section-header">
        <h2 class="section-title">–°–≤–µ–∂–∏–µ —Ä–µ–ª–∏–∑—ã</h2>
        <a href="{% url 'library' %}" class="view-all">–í—Å–µ –∞–ª—å–±–æ–º—ã</a>
    </div>
    
    <div class="grid grid-6">
        {% for album in new_albums %}
        <a href="{% url 'artist_detail' album.artist.name %}" class="card-link">
        <div class="card">
            {% if album.cover_url %}
            <img src="{{ album.cover_url }}" alt="{{ album.title }}" class="card-img">
            {% else %}
            <div class="card-img" style="background: #333; display: flex; align-items: center; justify-content: center;">
                üéµ
            </div>
            {% endif %}
            <div class="card-title">{{ album.title }}</div>
            <div class="card-subtitle">{{ album.artist.name }}</div>
        </div>
        </a>
        {% empty %}
        <div class="card">
            <div class="card-img" style="background: #333; display: flex; align-items: center; justify-content: center;">
                üéµ
            </div>
            <div class="card-title">–ê–ª—å–±–æ–º–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
            <div class="card-subtitle">–î–æ–±–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É</div>
        </div>
        {% endfor %}
    </div>
</section>

<section class="section">
    <div class="section-header">
        <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞—Ä—Ç–∏—Å—Ç—ã</h2>
        <a href="{% url 'library' %}" class="view-all">–í—Å–µ –∞—Ä—Ç–∏—Å—Ç—ã</a>
    </div>
    
    <div class="grid grid-6">
        {% for artist in featured_artists %}
        <a href="{% url 'artist_detail' artist.name %}" class="card-link">
        <div class="card">
            {% if artist.photo_url %}
            <img src="{{ artist.photo_url }}" alt="{{ artist.name }}" class="card-img">
            {% else %}
            <div class="card-img" style="background: #333; display: flex; align-items: center; justify-content: center;">
                üë§
            </div>
            {% endif %}
            <div class="card-title">{{ artist.name }}</div>
            {% if artist.verified %}
            <div class="card-subtitle">‚úì –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π</div>
            {% endif %}
        </div>
        </a>
        {% empty %}
        <div class="card">
            <div class="card-img" style="background: #333; display: flex; align-items: center; justify-content: center;">
                üë§
            </div>
            <div class="card-title">–ê—Ä—Ç–∏—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
            <div class="card-subtitle">–î–æ–±–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É</div>
        </div>
        {% endfor %}
    </div>
</section>
</body>
{% endblock %}